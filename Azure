#Azure CLI
1. az login
1. az provider register -n Microsoft.ContainerService
#Check Microsoft Container service
1. az provider show -n Microsoft.ContainerService

# create a resource group
2. az group create --name java-microservice-resource-group-aks --location eastus

#check the resource group
3. az group list

#create a new kubernetes cluster with one node (kubelive is the cluster name)
4. az aks create --resource-group java-microservice-resource-group-aks --name kubelive --node-count 1 --generate-ssh-keys

#show us the available clusters
5. az aks list

# cube CTL is what we are going to use to talk  to the kubernetes cluster
6. az aks install-cli

cd ~
cd .kube/
ls

# kube Configuration => everything you need to kube CTL to talk to the endpoint will be configure (kubelive is the cluster name)
7. az aks get-credentials --resource-group java-microservice-resource-group-aks --name kubelive

#get kubernetes nodes
8. kubectl get nodes

#get component status
9. kubectl get cs

#get cluster info
10. kubectl cluster-info

#Deploy an appication
11. kubectl create -f  app.yaml

#watch the pods
12. kubectl get po --watch

#watch the services
13. kubectl get svc --watch

#take a pod an expose it to the outside wolrd
14. kubectl expose pod <pod name> --port=80 --target-port=80 --type=LoadBalancer

#scale a cluster
15. az aks scale <name of the cluster> 

#Upgrade the kubernetes version
16.az aks upgrade  

#set the location
17. az configure -d group=java_demo location=eastus

#create a secure private registry
18. az acr create --admin-enabled --resource-group marcy-aks --name infomarcy --sku Basic

#export registry credentials
19. export DOCKER_REGISTRY=$(az acr show --name infomarcy --query loginServer --output tsv)
20.  export  DOCKER_USER=infomarcy
21.export DOCKER_PASSWORD=$(az acr credential show --name infomarcy --query passwords[0].value --output tsv)

#find the maven configuration
22. less ~/.m2/settings.xml

#deploy java app to docker as an image using maven
23. mvn clean package docker:build -DpushImage

#see the list of repositories in azure
24. az acr repository list --name infomarcy

#create an app service plan
25: az appservice plan create --name javaappservice --is-linux --sku S1 --resource-group marcy-aks

#create a webapp to run our java App
25. az webapp create --name java_employee_microservice --plan 
